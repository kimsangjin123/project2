<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.mock.dao.QaDao">

  <insert id="write_ok" parameterType="kr.co.mock.dto.QaDto">
    insert into qa(q_id,title,content,pwd,userid,writeday)
    values(#{q_id},#{title},#{content},#{pwd},#{userid},now())
  </insert>
  
  <insert id="dat_write_ok" parameterType="kr.co.mock.dto.Qa_datDto">
  	insert into qa_dat(qd_id,q_id,dat,pwd)
  	values(#{qd_id},#{q_id},#{dat},#{pwd})
  </insert>
  
  <select id="list" resultType="kr.co.mock.dto.QaDto">
    select * from qa order by q_id desc limit #{param1},10
  </select>
  
  <select id="content" resultType="kr.co.mock.dto.QaDto">
     select * from qa where q_id=#{param1}
  </select>
  
  <select id="update" resultType="kr.co.mock.dto.QaDto">
     select * from qa where q_id=#{param1}
  </select>
  
  <update id="update_ok" parameterType="kr.co.mock.dto.QaDto">
     update qa set q_id=#{q_id},title=#{title}, content=#{content},pwd=#{pwd} 
     where q_id=#{q_id}
  </update>

  <delete id="delete">
     delete from qa where q_id=#{param1}
  </delete>
  
  <select id="get_pagecount" resultType="Integer">
    select ceil(count(*)/10) from qa;
  </select>
  
</mapper>
